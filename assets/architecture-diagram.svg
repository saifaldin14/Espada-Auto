<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1100 680" font-family="'Segoe UI', system-ui, -apple-system, sans-serif">
  <defs>
    <linearGradient id="gatewayGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#1a1a2e;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#16213e;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="channelGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#0f3460;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#1a1a2e;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="cloudGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#533483;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#1a1a2e;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="agentGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#e94560;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#c23152;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="llmGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#0d4f3c;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#0a2e23;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="securityGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#7c2d12;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#451a03;stop-opacity:1" />
    </linearGradient>
    <filter id="shadow" x="-5%" y="-5%" width="110%" height="115%">
      <feDropShadow dx="0" dy="3" stdDeviation="5" flood-color="#000" flood-opacity="0.3"/>
    </filter>
    <marker id="arrowRight" markerWidth="10" markerHeight="7" refX="10" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#e94560"/>
    </marker>
    <marker id="arrowLeft" markerWidth="10" markerHeight="7" refX="0" refY="3.5" orient="auto">
      <polygon points="10 0, 0 3.5, 10 7" fill="#e94560"/>
    </marker>
    <marker id="arrowPurple" markerWidth="10" markerHeight="7" refX="10" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#b388ff"/>
    </marker>
    <marker id="arrowGreen" markerWidth="10" markerHeight="7" refX="10" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#22c55e"/>
    </marker>
  </defs>

  <!-- Background -->
  <rect width="1100" height="680" rx="12" fill="#0a0a1a"/>

  <!-- Title -->
  <text x="550" y="38" text-anchor="middle" fill="#fff" font-size="20" font-weight="700">âš”ï¸ Espada â€” Architecture Overview</text>
  <text x="550" y="56" text-anchor="middle" fill="#666" font-size="11">Software Infrastructure Automation Platform Â· 417K LoC Â· 889 Tests Â· 46 Extensions Â· 52 Skills</text>

  <!-- â•â•â• LEFT COLUMN: Messaging Channels (16+) â•â•â• -->
  <text x="130" y="85" text-anchor="middle" fill="#7ec8e3" font-size="13" font-weight="600" letter-spacing="1">MESSAGING CHANNELS</text>
  <text x="130" y="99" text-anchor="middle" fill="#4a7a9a" font-size="9">16+ platforms</text>

  <!-- Core channels -->
  <g filter="url(#shadow)">
    <rect x="30" y="110" width="200" height="30" rx="6" fill="url(#channelGrad)" stroke="#0f3460" stroke-width="1"/>
    <text x="48" y="130" fill="#25D366" font-size="14">ğŸ’¬</text>
    <text x="68" y="130" fill="#e0e0e0" font-size="12">WhatsApp</text>
    <text x="220" y="130" fill="#666" font-size="9" text-anchor="end">Baileys</text>
  </g>
  <g filter="url(#shadow)">
    <rect x="30" y="144" width="200" height="30" rx="6" fill="url(#channelGrad)" stroke="#0f3460" stroke-width="1"/>
    <text x="48" y="164" fill="#0088cc" font-size="14">âœˆï¸</text>
    <text x="68" y="164" fill="#e0e0e0" font-size="12">Telegram</text>
    <text x="220" y="164" fill="#666" font-size="9" text-anchor="end">grammY</text>
  </g>
  <g filter="url(#shadow)">
    <rect x="30" y="178" width="200" height="30" rx="6" fill="url(#channelGrad)" stroke="#0f3460" stroke-width="1"/>
    <text x="48" y="198" fill="#E01E5A" font-size="14">ğŸ”§</text>
    <text x="68" y="198" fill="#e0e0e0" font-size="12">Slack</text>
    <text x="220" y="198" fill="#666" font-size="9" text-anchor="end">Bolt</text>
  </g>
  <g filter="url(#shadow)">
    <rect x="30" y="212" width="200" height="30" rx="6" fill="url(#channelGrad)" stroke="#0f3460" stroke-width="1"/>
    <text x="48" y="232" fill="#5865F2" font-size="14">ğŸ®</text>
    <text x="68" y="232" fill="#e0e0e0" font-size="12">Discord</text>
    <text x="220" y="232" fill="#666" font-size="9" text-anchor="end">discord.js</text>
  </g>
  <g filter="url(#shadow)">
    <rect x="30" y="246" width="200" height="30" rx="6" fill="url(#channelGrad)" stroke="#0f3460" stroke-width="1"/>
    <text x="48" y="266" fill="#34a853" font-size="14">ğŸ’¼</text>
    <text x="68" y="266" fill="#e0e0e0" font-size="12">Google Chat</text>
    <text x="220" y="266" fill="#666" font-size="9" text-anchor="end">Chat API</text>
  </g>
  <g filter="url(#shadow)">
    <rect x="30" y="280" width="200" height="30" rx="6" fill="url(#channelGrad)" stroke="#0f3460" stroke-width="1"/>
    <text x="48" y="300" fill="#3b82f6" font-size="14">ğŸ“¡</text>
    <text x="68" y="300" fill="#e0e0e0" font-size="12">Signal</text>
    <text x="220" y="300" fill="#666" font-size="9" text-anchor="end">signal-cli</text>
  </g>
  <g filter="url(#shadow)">
    <rect x="30" y="314" width="200" height="30" rx="6" fill="url(#channelGrad)" stroke="#0f3460" stroke-width="1"/>
    <text x="48" y="334" fill="#34C759" font-size="14">ğŸ</text>
    <text x="68" y="334" fill="#e0e0e0" font-size="12">iMessage</text>
    <text x="220" y="334" fill="#666" font-size="9" text-anchor="end">imsg</text>
  </g>
  <g filter="url(#shadow)">
    <rect x="30" y="348" width="200" height="30" rx="6" fill="url(#channelGrad)" stroke="#0f3460" stroke-width="1"/>
    <text x="48" y="368" fill="#60a5fa" font-size="14">ğŸŒ</text>
    <text x="68" y="368" fill="#e0e0e0" font-size="12">WebChat</text>
    <text x="220" y="368" fill="#666" font-size="9" text-anchor="end">Gateway WS</text>
  </g>

  <!-- Extension channels -->
  <text x="130" y="400" text-anchor="middle" fill="#4a7a9a" font-size="9">Extensions</text>
  <g filter="url(#shadow)">
    <rect x="30" y="408" width="200" height="30" rx="6" fill="url(#channelGrad)" stroke="#0f3460" stroke-width="0.5" opacity="0.85"/>
    <text x="48" y="428" fill="#9333ea" font-size="14">ğŸ¢</text>
    <text x="68" y="428" fill="#c0c0c0" font-size="12">MS Teams</text>
    <text x="220" y="428" fill="#555" font-size="9" text-anchor="end">Bot Framework</text>
  </g>
  <g filter="url(#shadow)">
    <rect x="30" y="442" width="200" height="30" rx="6" fill="url(#channelGrad)" stroke="#0f3460" stroke-width="0.5" opacity="0.85"/>
    <text x="48" y="462" fill="#0dbd8b" font-size="14">ğŸ”—</text>
    <text x="68" y="462" fill="#c0c0c0" font-size="12">Matrix</text>
    <text x="220" y="462" fill="#555" font-size="9" text-anchor="end">matrix-js-sdk</text>
  </g>
  <g filter="url(#shadow)">
    <rect x="30" y="476" width="200" height="30" rx="6" fill="url(#channelGrad)" stroke="#0f3460" stroke-width="0.5" opacity="0.85"/>
    <text x="48" y="496" fill="#06d6a0" font-size="14">ğŸ“±</text>
    <text x="68" y="496" fill="#c0c0c0" font-size="12">LINE</text>
    <text x="220" y="496" fill="#555" font-size="9" text-anchor="end">LINE API</text>
  </g>
  <text x="130" y="524" text-anchor="middle" fill="#4a7a9a" font-size="9">+ Mattermost Â· Nostr Â· Twitch Â· Zalo Â· BlueBubbles Â· Nextcloud Talk Â· Tlon</text>

  <!-- â•â•â• CENTER: Gateway â•â•â• -->
  <g filter="url(#shadow)">
    <rect x="310" y="75" width="380" height="530" rx="12" fill="url(#gatewayGrad)" stroke="#e94560" stroke-width="2"/>
    <text x="500" y="105" text-anchor="middle" fill="#e94560" font-size="16" font-weight="700">ESPADA GATEWAY</text>
    <text x="500" y="122" text-anchor="middle" fill="#666" font-size="11">WebSocket + HTTP Â· ws://127.0.0.1:18789</text>

    <!-- Security Layer -->
    <rect x="335" y="135" width="330" height="40" rx="6" fill="url(#securityGrad)" stroke="#f97316" stroke-width="1"/>
    <text x="500" y="155" text-anchor="middle" fill="#fdba74" font-size="11" font-weight="600">ğŸ›¡ï¸ Security Layer</text>
    <text x="500" y="169" text-anchor="middle" fill="#9a6a3a" font-size="9">Auth (Token/SSO/OIDC/MFA) Â· RBAC Â· Exec Approval Â· DM Pairing</text>

    <!-- Control Plane -->
    <rect x="335" y="185" width="330" height="50" rx="8" fill="#1a1a3e" stroke="#333" stroke-width="1"/>
    <text x="500" y="207" text-anchor="middle" fill="#7ec8e3" font-size="12" font-weight="600">Control Plane</text>
    <text x="500" y="222" text-anchor="middle" fill="#888" font-size="10">Sessions Â· Channels Â· Tools Â· Events Â· Hooks Â· Config Hot-Reload</text>

    <!-- AI Agent box -->
    <rect x="355" y="248" width="290" height="55" rx="8" fill="url(#agentGrad)"/>
    <text x="500" y="272" text-anchor="middle" fill="#fff" font-size="13" font-weight="700">ğŸ¤– AI Agent (pi-embedded-runner)</text>
    <text x="500" y="290" text-anchor="middle" fill="#ffcdd2" font-size="10">Multi-Provider Â· Tool Streaming Â· Failover Â· Context Compaction</text>

    <!-- Agent capabilities row 1 -->
    <rect x="335" y="315" width="160" height="34" rx="6" fill="#1a1a3e" stroke="#333" stroke-width="1"/>
    <text x="415" y="337" text-anchor="middle" fill="#a0a0a0" font-size="10">ğŸ–¥ï¸ CLI + TUI</text>

    <rect x="505" y="315" width="160" height="34" rx="6" fill="#1a1a3e" stroke="#333" stroke-width="1"/>
    <text x="585" y="337" text-anchor="middle" fill="#a0a0a0" font-size="10">ğŸŒ WebChat Dashboard</text>

    <!-- Agent capabilities row 2 -->
    <rect x="335" y="355" width="160" height="34" rx="6" fill="#1a1a3e" stroke="#333" stroke-width="1"/>
    <text x="415" y="377" text-anchor="middle" fill="#a0a0a0" font-size="10">ğŸ macOS App</text>

    <rect x="505" y="355" width="160" height="34" rx="6" fill="#1a1a3e" stroke="#333" stroke-width="1"/>
    <text x="585" y="377" text-anchor="middle" fill="#a0a0a0" font-size="10">ğŸ“± iOS / Android</text>

    <!-- Sandbox -->
    <rect x="335" y="400" width="330" height="30" rx="6" fill="#1a1a3e" stroke="#2563eb" stroke-width="1"/>
    <text x="500" y="420" text-anchor="middle" fill="#60a5fa" font-size="10">ğŸ³ Docker Sandbox Â· Browser Automation (Playwright)</text>

    <!-- Extensions -->
    <rect x="335" y="440" width="330" height="36" rx="6" fill="#1a1a3e" stroke="#533483" stroke-width="1"/>
    <text x="500" y="458" text-anchor="middle" fill="#b388ff" font-size="11">ğŸ”Œ 46 Extensions</text>
    <text x="500" y="471" text-anchor="middle" fill="#7a5aaa" font-size="9">AWS Â· Azure Â· GCP Â· K8s Â· Terraform Â· Knowledge Graph Â· Memory</text>

    <!-- Skills -->
    <rect x="335" y="484" width="160" height="30" rx="6" fill="#1a1a3e" stroke="#22c55e" stroke-width="1"/>
    <text x="415" y="504" text-anchor="middle" fill="#86efac" font-size="10">ğŸ“ 52 Skills</text>

    <!-- Cron / Automation -->
    <rect x="505" y="484" width="160" height="30" rx="6" fill="#1a1a3e" stroke="#eab308" stroke-width="1"/>
    <text x="585" y="504" text-anchor="middle" fill="#fde68a" font-size="10">â° Cron Â· Webhooks</text>

    <!-- Knowledge Graph highlight -->
    <rect x="335" y="524" width="330" height="38" rx="6" fill="#1a1a3e" stroke="#06b6d4" stroke-width="1"/>
    <text x="500" y="542" text-anchor="middle" fill="#22d3ee" font-size="11" font-weight="600">ğŸ” Infrastructure Knowledge Graph</text>
    <text x="500" y="556" text-anchor="middle" fill="#0e7490" font-size="9">IQL Queries Â· 31 AI Tools Â· 6 Compliance Frameworks Â· MCP Server Â· Time Travel</text>

    <!-- Memory -->
    <rect x="335" y="570" width="330" height="26" rx="6" fill="#1a1a3e" stroke="#333" stroke-width="1"/>
    <text x="500" y="588" text-anchor="middle" fill="#888" font-size="10">ğŸ§  Memory (LanceDB vectors) Â· Multi-Agent Routing Â· Subagent Spawning</text>
  </g>

  <!-- â•â•â• TOP RIGHT: LLM Providers â•â•â• -->
  <text x="870" y="85" text-anchor="middle" fill="#86efac" font-size="13" font-weight="600" letter-spacing="1">LLM PROVIDERS</text>
  <text x="870" y="99" text-anchor="middle" fill="#3a7a4a" font-size="9">12+ with auto-failover</text>

  <g filter="url(#shadow)">
    <rect x="770" y="110" width="200" height="30" rx="6" fill="url(#llmGrad)" stroke="#22c55e" stroke-width="1"/>
    <text x="790" y="130" fill="#d97706" font-size="12">ğŸŸ </text>
    <text x="810" y="130" fill="#e0e0e0" font-size="12">Anthropic</text>
    <text x="960" y="130" fill="#4a8a5a" font-size="9" text-anchor="end">Claude</text>
  </g>
  <g filter="url(#shadow)">
    <rect x="770" y="144" width="200" height="30" rx="6" fill="url(#llmGrad)" stroke="#22c55e" stroke-width="1"/>
    <text x="790" y="164" fill="#10a37f" font-size="12">ğŸŸ¢</text>
    <text x="810" y="164" fill="#e0e0e0" font-size="12">OpenAI</text>
    <text x="960" y="164" fill="#4a8a5a" font-size="9" text-anchor="end">GPT-4.1</text>
  </g>
  <g filter="url(#shadow)">
    <rect x="770" y="178" width="200" height="30" rx="6" fill="url(#llmGrad)" stroke="#22c55e" stroke-width="1"/>
    <text x="790" y="198" fill="#4285F4" font-size="12">ğŸ”µ</text>
    <text x="810" y="198" fill="#e0e0e0" font-size="12">Google Gemini</text>
    <text x="960" y="198" fill="#4a8a5a" font-size="9" text-anchor="end">2.5 Flash</text>
  </g>
  <g filter="url(#shadow)">
    <rect x="770" y="212" width="200" height="30" rx="6" fill="url(#llmGrad)" stroke="#22c55e" stroke-width="1"/>
    <text x="790" y="232" fill="#FF9900" font-size="12">ğŸŸ¡</text>
    <text x="810" y="232" fill="#e0e0e0" font-size="12">AWS Bedrock</text>
    <text x="960" y="232" fill="#4a8a5a" font-size="9" text-anchor="end">Multi-model</text>
  </g>
  <g filter="url(#shadow)">
    <rect x="770" y="246" width="200" height="30" rx="6" fill="url(#llmGrad)" stroke="#22c55e" stroke-width="1"/>
    <text x="790" y="266" fill="#a855f7" font-size="12">ğŸŸ£</text>
    <text x="810" y="266" fill="#e0e0e0" font-size="12">Ollama (local)</text>
    <text x="960" y="266" fill="#4a8a5a" font-size="9" text-anchor="end">No API key</text>
  </g>
  <text x="870" y="296" text-anchor="middle" fill="#3a7a4a" font-size="9">+ OpenRouter Â· Groq Â· xAI Â· Mistral Â· DeepSeek Â· Cerebras Â· GitHub Copilot</text>

  <!-- â•â•â• RIGHT: Cloud &amp; Orchestration â•â•â• -->
  <text x="870" y="325" text-anchor="middle" fill="#b388ff" font-size="13" font-weight="600" letter-spacing="1">CLOUD &amp; INFRA</text>

  <g filter="url(#shadow)">
    <rect x="770" y="338" width="200" height="42" rx="8" fill="url(#cloudGrad)" stroke="#533483" stroke-width="1"/>
    <text x="790" y="360" fill="#FF9900" font-size="13">â˜ï¸</text>
    <text x="810" y="360" fill="#e0e0e0" font-size="12" font-weight="600">AWS</text>
    <text x="810" y="374" fill="#888" font-size="9">EC2 Â· S3 Â· Lambda Â· IAM Â· VPC</text>
  </g>
  <g filter="url(#shadow)">
    <rect x="770" y="384" width="200" height="42" rx="8" fill="url(#cloudGrad)" stroke="#533483" stroke-width="1"/>
    <text x="790" y="406" fill="#4285F4" font-size="13">â˜ï¸</text>
    <text x="810" y="406" fill="#e0e0e0" font-size="12" font-weight="600">Azure</text>
    <text x="810" y="420" fill="#888" font-size="9">VMs Â· Storage Â· Functions</text>
  </g>
  <g filter="url(#shadow)">
    <rect x="770" y="430" width="200" height="42" rx="8" fill="url(#cloudGrad)" stroke="#533483" stroke-width="1"/>
    <text x="790" y="452" fill="#34a853" font-size="13">â˜ï¸</text>
    <text x="810" y="452" fill="#e0e0e0" font-size="12" font-weight="600">GCP</text>
    <text x="810" y="466" fill="#888" font-size="9">Compute Â· Cloud Run Â· GKE</text>
  </g>

  <g filter="url(#shadow)">
    <rect x="770" y="480" width="96" height="34" rx="6" fill="url(#cloudGrad)" stroke="#533483" stroke-width="1"/>
    <text x="818" y="502" text-anchor="middle" fill="#e0e0e0" font-size="11">âš™ï¸ K8s</text>
  </g>
  <g filter="url(#shadow)">
    <rect x="874" y="480" width="96" height="34" rx="6" fill="url(#cloudGrad)" stroke="#533483" stroke-width="1"/>
    <text x="922" y="502" text-anchor="middle" fill="#e0e0e0" font-size="11">ğŸ³ Docker</text>
  </g>
  <g filter="url(#shadow)">
    <rect x="770" y="520" width="96" height="34" rx="6" fill="url(#cloudGrad)" stroke="#533483" stroke-width="1"/>
    <text x="818" y="542" text-anchor="middle" fill="#e0e0e0" font-size="11">ğŸ—ï¸ Terraform</text>
  </g>
  <g filter="url(#shadow)">
    <rect x="874" y="520" width="96" height="34" rx="6" fill="url(#cloudGrad)" stroke="#533483" stroke-width="1"/>
    <text x="922" y="542" text-anchor="middle" fill="#e0e0e0" font-size="11">ğŸš€ Pulumi</text>
  </g>

  <!-- â•â•â• BOTTOM: Quickstart Flow â•â•â• -->
  <rect x="30" y="555" width="660" height="30" rx="6" fill="#0d1a0d" stroke="#22c55e" stroke-width="1"/>
  <text x="50" y="575" fill="#22c55e" font-size="11" font-weight="600">âš¡ Quickstart Flow:</text>
  <text x="190" y="575" fill="#86efac" font-size="10">espada quickstart â†’ Auto-detect API keys â†’ Write config â†’ Open dashboard â†’ Chat in under 30s</text>

  <!-- â•â•â• BOTTOM: Deployment â•â•â• -->
  <text x="870" y="580" text-anchor="middle" fill="#94a3b8" font-size="11" font-weight="600">DEPLOYMENT</text>
  <g filter="url(#shadow)">
    <rect x="770" y="590" width="200" height="70" rx="8" fill="#1a1a2e" stroke="#64748b" stroke-width="1"/>
    <text x="790" y="612" fill="#94a3b8" font-size="10">ğŸ³ Docker / Docker Compose</text>
    <text x="790" y="628" fill="#94a3b8" font-size="10">âœˆï¸ Fly.io Â· Render Â· Railway</text>
    <text x="790" y="644" fill="#94a3b8" font-size="10">ğŸ–¥ï¸ VPS Â· macOS App Â· Nix</text>
  </g>

  <!-- â•â•â• BOTTOM: Compliance â•â•â• -->
  <rect x="30" y="600" width="660" height="60" rx="8" fill="#1a1a2e" stroke="#64748b" stroke-width="1"/>
  <text x="50" y="622" fill="#94a3b8" font-size="11" font-weight="600">ğŸ“‹ Compliance &amp; Governance</text>
  <text x="50" y="640" fill="#64748b" font-size="10">SOC 2 Â· HIPAA Â· PCI-DSS Â· ISO 27001 Â· NIST 800-53 Â· CIS Benchmarks</text>
  <text x="50" y="654" fill="#64748b" font-size="10">Audit Trail Â· Cost Governance Â· Policy Engine (OPA) Â· RBAC Â· Multi-Tenancy</text>

  <!-- â•â•â• ARROWS â•â•â• -->
  <!-- Channels â†’ Gateway -->
  <line x1="235" y1="250" x2="305" y2="250" stroke="#e94560" stroke-width="2.5" marker-end="url(#arrowRight)"/>
  <line x1="235" y1="320" x2="305" y2="320" stroke="#e94560" stroke-width="2.5" marker-start="url(#arrowLeft)"/>
  <text x="270" y="242" text-anchor="middle" fill="#e94560" font-size="9" font-weight="600">inbound</text>
  <text x="270" y="335" text-anchor="middle" fill="#e94560" font-size="9" font-weight="600">outbound</text>

  <!-- Gateway â†’ LLM Providers -->
  <line x1="695" y1="270" x2="765" y2="200" stroke="#22c55e" stroke-width="2" marker-end="url(#arrowGreen)"/>
  <text x="730" y="225" text-anchor="middle" fill="#22c55e" font-size="9" font-weight="600" transform="rotate(-30 730 225)">LLM API</text>

  <!-- Gateway â†’ Cloud -->
  <line x1="695" y1="420" x2="765" y2="420" stroke="#b388ff" stroke-width="2.5" marker-end="url(#arrowPurple)"/>
  <text x="730" y="412" text-anchor="middle" fill="#b388ff" font-size="9" font-weight="600">deploy</text>

  <!-- Gateway â†’ Orchestration -->
  <line x1="695" y1="490" x2="765" y2="510" stroke="#b388ff" stroke-width="2" marker-end="url(#arrowPurple)"/>
  <text x="730" y="508" text-anchor="middle" fill="#b388ff" font-size="9" font-weight="600">orchestrate</text>
</svg>
